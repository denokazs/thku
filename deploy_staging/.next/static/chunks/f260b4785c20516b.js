(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95187,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={callServer:function(){return i.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=e.r(32120),o=e.r(92245),l=e.r(35326)},55838,(e,t,r)=>{"use strict";var n=e.r(71645),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,o=n.useEffect,l=n.useLayoutEffect,u=n.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),a=n[0].inst,c=n[1];return l(function(){a.value=r,a.getSnapshot=t,s(a)&&c({inst:a})},[e,r,t]),o(function(){return s(a)&&c({inst:a}),e(function(){s(a)&&c({inst:a})})},[e]),u(r),r};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},62008,e=>{"use strict";let t;var r=e.i(43476),n=e.i(71645),a=e.i(15275),i=e.i(95187);let o=(0,i.createServerReference)("7086b487069271ef8061b19ec6b5bb075d68b7e272",i.callServer,void 0,i.findSourceMapURL,"addConfessionAction"),l=(0,i.createServerReference)("60f028cfb3d1bb0763fb3d0082c871cb20f4bf69d8",i.callServer,void 0,i.findSourceMapURL,"updateConfessionStatusAction"),u=(0,i.createServerReference)("7057f357649cb246204c9b4ffbae7053876ebfe94d",i.callServer,void 0,i.findSourceMapURL,"updateConfessionVotesAction"),s=(0,i.createServerReference)("780ee099162eb2d058b9cbd436970058cf7224d12b",i.callServer,void 0,i.findSourceMapURL,"addCommentAction"),c=(0,i.createServerReference)("60fa2190b9a618fed2bbb9025dfe94767bde8a11f6",i.callServer,void 0,i.findSourceMapURL,"updateCommentStatusAction"),f=(0,i.createServerReference)("602b806037e766993bc6842033a67637cada092f9a",i.callServer,void 0,i.findSourceMapURL,"toggleCommentLikeAction");var d=e.i(2239);e.s(["ERROR_REVALIDATE_EVENT",()=>3,"FOCUS_EVENT",()=>0,"MUTATE_EVENT",()=>2,"RECONNECT_EVENT",()=>1],11671);var p=Object.prototype.hasOwnProperty;let v=new WeakMap,m=()=>{},b=m(),g=Object,S=e=>e===b,y=(e,t)=>({...e,...t}),h={},E={},k="undefined",w=typeof window!=k,R=typeof document!=k,O=w&&"Deno"in window,_=(e,t)=>{let r=v.get(e);return[()=>!S(t)&&e.get(t)||h,n=>{if(!S(t)){let a=e.get(t);t in E||(E[t]=a),r[5](t,y(a,n),a||h)}},r[6],()=>!S(t)&&t in E?E[t]:!S(t)&&e.get(t)||h]},C=!0,[T,A]=w&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[m,m],L={initFocus:e=>(R&&document.addEventListener("visibilitychange",e),T("focus",e),()=>{R&&document.removeEventListener("visibilitychange",e),A("focus",e)}),initReconnect:e=>{let t=()=>{C=!0,e()},r=()=>{C=!1};return T("online",t),T("offline",r),()=>{A("online",t),A("offline",r)}}},M=!n.default.useId,I=!w||O,V=I?n.useEffect:n.useLayoutEffect,D="u">typeof navigator&&navigator.connection,N=!I&&D&&(["slow-2g","2g"].includes(D.effectiveType)||D.saveData),j=new WeakMap,x=(e,t)=>e===`[object ${t}]`,F=0,P=e=>{let t,r,n=typeof e,a=g.prototype.toString.call(e),i=x(a,"Date"),o=x(a,"RegExp"),l=x(a,"Object");if(g(e)!==e||i||o)t=i?e.toJSON():"symbol"==n?e.toString():"string"==n?JSON.stringify(e):""+e;else{if(t=j.get(e))return t;if(t=++F+"~",j.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=P(e[r])+",";j.set(e,t)}if(l){t="#";let n=g.keys(e).sort();for(;!S(r=n.pop());)S(e[r])||(t+=r+":"+P(e[r])+",");j.set(e,t)}}return t},U=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?P(e):"",t]},J=0,W=()=>++J;async function K(...e){let[t,r,n,a]=e,i=y({populateCache:!0,throwOnError:!0},"boolean"==typeof a?{revalidate:a}:a||{}),o=i.populateCache,l=i.rollbackOnError,u=i.optimisticData,s=i.throwOnError;if("function"==typeof r){let e=[];for(let n of t.keys())!/^\$(inf|sub)\$/.test(n)&&r(t.get(n)._k)&&e.push(n);return Promise.all(e.map(c))}return c(r);async function c(r){let a,[c]=U(r);if(!c)return;let[f,d]=_(t,c),[p,m,g,y]=v.get(t),h=()=>{let e=p[c];return("function"==typeof i.revalidate?i.revalidate(f().data,r):!1!==i.revalidate)&&(delete g[c],delete y[c],e&&e[0])?e[0](2).then(()=>f().data):f().data};if(e.length<3)return h();let E=n,k=!1,w=W();m[c]=[w,0];let R=!S(u),O=f(),C=O.data,T=O._c,A=S(T)?C:T;if(R&&d({data:u="function"==typeof u?u(A,C):u,_c:A}),"function"==typeof E)try{E=E(A)}catch(e){a=e,k=!0}if(E&&"function"==typeof E.then){let e;if(E=await E.catch(e=>{a=e,k=!0}),w!==m[c][0]){if(k)throw a;return E}k&&R&&(e=a,"function"==typeof l?l(e):!1!==l)&&(o=!0,d({data:A,_c:b}))}if(o&&!k&&("function"==typeof o?d({data:o(E,A),error:b,_c:b}):d({data:E,error:b,_c:b})),m[c][1]=W(),Promise.resolve(h()).then(()=>{d({_c:b})}),k){if(s)throw a;return}return E}}let $=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},z=(e,t)=>{if(!v.has(e)){let r=y(L,t),n=Object.create(null),a=K.bind(b,e),i=m,o=Object.create(null),l=(e,t)=>{let r=o[e]||[];return o[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},u=(t,r,n)=>{e.set(t,r);let a=o[t];if(a)for(let e of a)e(r,n)},s=()=>{if(!v.has(e)&&(v.set(e,[n,Object.create(null),Object.create(null),Object.create(null),a,u,l]),!I)){let t=r.initFocus(setTimeout.bind(b,$.bind(b,n,0))),a=r.initReconnect(setTimeout.bind(b,$.bind(b,n,1)));i=()=>{t&&t(),a&&a(),v.delete(e)}}};return s(),[e,a,s,i]}return[e,v.get(e)[4]]},[H,B]=z(new Map),Y=y({onLoadingSlow:m,onSuccess:m,onError:m,onErrorRetry:(e,t,r,n,a)=>{let i=r.errorRetryCount,o=a.retryCount,l=~~((Math.random()+.5)*(1<<(o<8?o:8)))*r.errorRetryInterval;(S(i)||!(o>i))&&setTimeout(n,l,a)},onDiscarded:m,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:N?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:N?5e3:3e3,compare:function e(t,r){var n,a;if(t===r)return!0;if(t&&r&&(n=t.constructor)===r.constructor){if(n===Date)return t.getTime()===r.getTime();if(n===RegExp)return t.toString()===r.toString();if(n===Array){if((a=t.length)===r.length)for(;a--&&e(t[a],r[a]););return -1===a}if(!n||"object"==typeof t){for(n in a=0,t)if(p.call(t,n)&&++a&&!p.call(r,n)||!(n in r)||!e(t[n],r[n]))return!1;return Object.keys(r).length===a}}return t!=t&&r!=r},isPaused:()=>!1,cache:H,mutate:B,fallback:{}},{isOnline:()=>C,isVisible:()=>{let e=R&&document.visibilityState;return S(e)||"hidden"!==e}}),q=(e,t)=>{let r=y(e,t);if(t){let{use:n,fallback:a}=e,{use:i,fallback:o}=t;n&&i&&(r.use=n.concat(i)),a&&o&&(r.fallback=y(a,o))}return r},G=(0,n.createContext)({});var Q=e.i(11671);let X=w&&window.__SWR_DEVTOOLS_USE__,Z=(X?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,n)=>{let a=r&&((...e)=>{let[n]=U(t),[,,,a]=v.get(H);if(n.startsWith("$inf$"))return r(...e);let i=a[n];return S(i)?r(...e):(delete a[n],i)});return e(t,a,n)});X&&(window.__SWR_DEVTOOLS_REACT__=n.default);let ee=()=>{},et=ee(),er=(new WeakMap,n.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}})),en={dedupe:!0},ea=Promise.resolve(b),ei=()=>m;g.defineProperty(e=>{let{value:t}=e,r=(0,n.useContext)(G),a="function"==typeof t,i=(0,n.useMemo)(()=>a?t(r):t,[a,r,t]),o=(0,n.useMemo)(()=>a?i:q(r,i),[a,r,i]),l=i&&i.provider,u=(0,n.useRef)(b);l&&!u.current&&(u.current=z(l(o.cache||H),i));let s=u.current;return s&&(o.cache=s[0],o.mutate=s[1]),V(()=>{if(s)return s[2]&&s[2](),s[3]},[]),(0,n.createElement)(G.Provider,y(e,{value:o}))},"defaultValue",{value:Y});let eo=(t=(e,t,r)=>{let{cache:a,compare:i,suspense:o,fallbackData:l,revalidateOnMount:u,revalidateIfStale:s,refreshInterval:c,refreshWhenHidden:f,refreshWhenOffline:p,keepPreviousData:m,strictServerPrefetchWarning:g}=r,[h,E,R,O]=v.get(a),[C,T]=U(e),A=(0,n.useRef)(!1),L=(0,n.useRef)(!1),D=(0,n.useRef)(C),N=(0,n.useRef)(t),j=(0,n.useRef)(r),x=()=>j.current.isVisible()&&j.current.isOnline(),[F,P,J,$]=_(a,C),z=(0,n.useRef)({}).current,H=S(l)?S(r.fallback)?b:r.fallback[C]:l,B=(e,t)=>{for(let r in z)if("data"===r){if(!i(e[r],t[r])&&(!S(e[r])||!i(el,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},Y=!A.current,q=(0,n.useMemo)(()=>{let e=F(),r=$(),n=e=>{let r=y(e);return(delete r._k,(()=>{if(!C||!t||j.current.isPaused())return!1;if(Y&&!S(u))return u;let e=S(H)?r.data:H;return S(e)||s})())?{isValidating:!0,isLoading:!0,...r}:r},a=n(e),i=e===r?a:n(r),o=a;return[()=>{let e=n(F());return B(e,o)?(o.data=e.data,o.isLoading=e.isLoading,o.isValidating=e.isValidating,o.error=e.error,o):(o=e,e)},()=>i]},[a,C]),G=(0,d.useSyncExternalStore)((0,n.useCallback)(e=>J(C,(t,r)=>{B(r,t)||e()}),[a,C]),q[0],q[1]),X=h[C]&&h[C].length>0,Z=G.data,ee=S(Z)?H&&"function"==typeof H.then?er(H):H:Z,et=G.error,eo=(0,n.useRef)(ee),el=m?S(Z)?S(eo.current)?ee:eo.current:Z:ee,eu=C&&S(ee),es=(0,n.useRef)(null);I||(0,d.useSyncExternalStore)(ei,()=>(es.current=!1,es),()=>(es.current=!0,es));let ec=es.current;g&&ec&&!o&&eu&&console.warn(`Missing pre-initiated data for serialized key "${C}" during server-side rendering. Data fetching should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);let ef=!(!C||!t||j.current.isPaused())&&(!X||!!S(et))&&(Y&&!S(u)?u:o?!S(ee)&&s:S(ee)||s),ed=S(G.isValidating)?ef:G.isValidating,ep=S(G.isLoading)?ef:G.isLoading,ev=(0,n.useCallback)(async e=>{let t,n,a=N.current;if(!C||!a||L.current||j.current.isPaused())return!1;let o=!0,l=e||{},u=!R[C]||!l.dedupe,s=()=>M?!L.current&&C===D.current&&A.current:C===D.current,c={isValidating:!1,isLoading:!1},f=()=>{P(c)},d=()=>{let e=R[C];e&&e[1]===n&&delete R[C]},p={isValidating:!0};S(F().data)&&(p.isLoading=!0);try{if(u&&(P(p),r.loadingTimeout&&S(F().data)&&setTimeout(()=>{o&&s()&&j.current.onLoadingSlow(C,r)},r.loadingTimeout),R[C]=[a(T),W()]),[t,n]=R[C],t=await t,u&&setTimeout(d,r.dedupingInterval),!R[C]||R[C][1]!==n)return u&&s()&&j.current.onDiscarded(C),!1;c.error=b;let e=E[C];if(!S(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return f(),u&&s()&&j.current.onDiscarded(C),!1;let l=F().data;c.data=i(l,t)?l:t,u&&s()&&j.current.onSuccess(t,C,r)}catch(r){d();let e=j.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(c.error=r,u&&s())&&(e.onError(r,C,e),(!0===t||"function"==typeof t&&t(r))&&(!j.current.revalidateOnFocus||!j.current.revalidateOnReconnect||x())&&e.onErrorRetry(r,C,e,e=>{let t=h[C];t&&t[0]&&t[0](Q.ERROR_REVALIDATE_EVENT,e)},{retryCount:(l.retryCount||0)+1,dedupe:!0}))}return o=!1,f(),!0},[C,a]),em=(0,n.useCallback)((...e)=>K(a,D.current,...e),[]);if(V(()=>{N.current=t,j.current=r,S(Z)||(eo.current=Z)}),V(()=>{var e;let t;if(!C)return;let r=ev.bind(b,en),n=0;j.current.revalidateOnFocus&&(n=Date.now()+j.current.focusThrottleInterval);let a=(e=(e,t={})=>{if(e==Q.FOCUS_EVENT){let e=Date.now();j.current.revalidateOnFocus&&e>n&&x()&&(n=e+j.current.focusThrottleInterval,r())}else if(e==Q.RECONNECT_EVENT)j.current.revalidateOnReconnect&&x()&&r();else if(e==Q.MUTATE_EVENT)return ev();else if(e==Q.ERROR_REVALIDATE_EVENT)return ev(t)},(t=h[C]||(h[C]=[])).push(e),()=>{let r=t.indexOf(e);r>=0&&(t[r]=t[t.length-1],t.pop())});if(L.current=!1,D.current=C,A.current=!0,P({_k:T}),ef&&!R[C])if(S(ee)||I)r();else w&&typeof window.requestAnimationFrame!=k?window.requestAnimationFrame(r):setTimeout(r,1);return()=>{L.current=!0,a()}},[C]),V(()=>{let e;function t(){let t="function"==typeof c?c(F().data):c;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!F().error&&(f||j.current.isVisible())&&(p||j.current.isOnline())?ev(en).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[c,f,p,C]),(0,n.useDebugValue)(el),o){if(!M&&I&&eu)throw Error("Fallback data is required when using Suspense in SSR.");eu&&(N.current=t,j.current=r,L.current=!1);let e=O[C];if(er(!S(e)&&eu?em(e):ea),!S(et)&&eu)throw et;let n=eu?ev(en):ea;!S(el)&&eu&&(n.status="fulfilled",n.value=!0),er(n)}return{mutate:em,get data(){return z.data=!0,el},get error(){return z.error=!0,et},get isValidating(){return z.isValidating=!0,ed},get isLoading(){return z.isLoading=!0,ep}}},function(...e){let r,a=(r=(0,n.useContext)(G),(0,n.useMemo)(()=>y(Y,r),[r])),[i,o,l]="function"==typeof e[1]?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],u=q(a,l),s=t,{use:c}=u,f=(c||[]).concat(Z);for(let e=f.length;e--;)s=f[e](s);return s(i,o||u.fetcher||null,u)}),el=(0,i.createServerReference)("0039a463ebb594c113ed52fb98b09994d88e7e16cd",i.callServer,void 0,i.findSourceMapURL,"getConfessionsAction"),eu=(0,i.createServerReference)("4034c1876a42b0826f9b870007b9b3e0df6c91c34f",i.callServer,void 0,i.findSourceMapURL,"getCommentsAction"),es=async()=>await el(),ec=async()=>await eu(),ef=(0,n.createContext)(void 0);function ed({children:e}){let[t,i]=(0,n.useState)(!1),[d,p]=(0,n.useState)({}),[v,m]=(0,n.useState)([{id:1,title:"Hava Ulaştırma Fakültesi 2025-2026 Akademik Yılı Açılış Töreni",date:"22 Eylül 2025",category:"Akademik"},{id:2,title:"Yeni Nesil İHA Teknolojileri Semineri ve Workshop Etkinliği",date:"15 Ekim 2025",category:"Etkinlik"}]),b=e=>{let t=e.split(" ");if(t.length<3)return 0;let r=parseInt(t[0]),n={Ocak:0,Şubat:1,Mart:2,Nisan:3,Mayıs:4,Haziran:5,Temmuz:6,Ağustos:7,Eylül:8,Ekim:9,Kasım:10,Aralık:11}[t[1]]||0;return new Date(parseInt(t[2]),n,r).getTime()},[g,S]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/news");if(e.ok){let t=await e.json();S(t.sort((e,t)=>b(t.date)-b(e.date)))}}catch(e){console.error("Failed to fetch news:",e)}})()},[]);let{confessions:y,mutate:h}=function(){let{data:e,error:t,mutate:r}=eo("confessions",es,{refreshInterval:1e4,revalidateOnFocus:!0,revalidateOnReconnect:!0,dedupingInterval:5e3});return{confessions:e||[],isLoading:!t&&!e,isError:t,mutate:r}}(),{comments:E,mutate:k}=function(){let{data:e,error:t,mutate:r}=eo("comments",ec,{refreshInterval:1e4,revalidateOnFocus:!0,revalidateOnReconnect:!0,dedupingInterval:5e3});return{comments:e||[],isLoading:!t&&!e,isError:t,mutate:r}}(),[w,R]=(0,n.useState)({}),[O,_]=(0,n.useState)([{name:"Sıhhiye",time:"14:30",status:"past"},{name:"Bahçelievler",time:"14:45",status:"current"},{name:"Aşti",time:"14:55",status:"next"},{name:"Türkkuşu Kampüsü",time:"15:15",status:"future"}]),[C,T]=(0,n.useState)([{id:"A",name:"Pizza & Kola",votes:65,color:"bg-red-500"},{id:"B",name:"Pide & Ayran",votes:35,color:"bg-orange-500"}]),[A,L]=(0,n.useState)({date:"",soup:"Mercimek Çorba",main:"Orman Kebabı",side:"Mevsim Salata",calorie:850,protein:25,carbs:45,fat:20});(0,n.useEffect)(()=>{try{let e=localStorage.getItem("thk_announcements");if(e){let t=JSON.parse(e);Array.isArray(t)&&m(t)}}catch(e){console.error("Failed to parse thk_announcements",e)}try{let e=localStorage.getItem("thk_shuttles");if(e){let t=JSON.parse(e);Array.isArray(t)&&_(t)}}catch(e){console.error("Failed to parse thk_shuttles",e)}try{let e=localStorage.getItem("thk_user_votes");if(e){let t=JSON.parse(e);t&&"object"==typeof t&&p(t)}}catch(e){console.error("Failed to parse thk_user_votes",e)}let e=new Date().toISOString().split("T")[0],t=e.slice(0,7),r=a.MONTHLY_MENU[t],n=null;if(r&&(n=r.find(t=>t.date===e)),n)L(n);else try{let e=localStorage.getItem("thk_daily_menu_v2");if(e){let t=JSON.parse(e);t&&"object"==typeof t&&L(t)}}catch(e){console.error("Failed to parse thk_daily_menu_v2",e)}},[]),(0,n.useEffect)(()=>{let e=()=>{let e=new Date,t=60*e.getHours()+e.getMinutes();_(e=>{let r=!1;return e.map(e=>{let[n,a]=e.time.split(":").map(Number),i=60*n+a-t,o="future";return i<-2?o="past":i>=-2&&i<=2?o="current":r?o="future":(o="next",r=!0),{...e,status:o}})})};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,n.useEffect)(()=>{localStorage.setItem("thk_announcements",JSON.stringify(v))},[v]),(0,n.useEffect)(()=>{localStorage.setItem("thk_daily_menu_v2",JSON.stringify(A))},[A]),(0,n.useEffect)(()=>{localStorage.setItem("thk_shuttles",JSON.stringify(O))},[O]),(0,n.useEffect)(()=>{localStorage.setItem("thk_user_votes",JSON.stringify(d))},[d]);let M=(0,n.useCallback)(()=>i(!0),[]),I=(0,n.useCallback)(()=>i(!1),[]),V=(0,n.useCallback)(async(e,t,r)=>{let n={id:Date.now(),text:e,user:t,type:r,likes:0,dislikes:0,status:"pending",timestamp:Date.now()};try{await h(async()=>{await o(e,t,r)},{optimisticData:e=>[n,...e||[]],rollbackOnError:!0,revalidate:!0})}catch(e){console.error("Failed to add confession:",e)}},[h]),D=(0,n.useCallback)(async(e,t)=>{h(r=>(r||[]).map(r=>r.id===e?{...r,status:t}:r),!1),await l(e,t),h()},[h]),N=(0,n.useCallback)(async(e,t,r,n)=>{let a={id:Date.now(),confessionId:e,parentCommentId:n,text:t,user:r,likes:0,status:"pending",timestamp:Date.now()};try{await k(async()=>{await s(e,t,r,n)},{optimisticData:e=>[a,...e||[]],rollbackOnError:!0,revalidate:!0})}catch(e){console.error("Failed to add comment:",e)}},[k]),j=(0,n.useCallback)(async(e,t)=>{k(r=>(r||[]).map(r=>r.id===e?{...r,status:t}:r),!1),await c(e,t),k()},[k]),x=(0,n.useCallback)(e=>E.filter(t=>t.confessionId===e&&"approved"===t.status&&!t.parentCommentId),[E]),F=(0,n.useCallback)(e=>E.filter(t=>t.parentCommentId===e&&"approved"===t.status),[E]),P=n.default.useRef(d),U=n.default.useRef(w),J=n.default.useRef(E),W=n.default.useRef(y);(0,n.useEffect)(()=>{P.current=d},[d]),(0,n.useEffect)(()=>{U.current=w},[w]),(0,n.useEffect)(()=>{J.current=E},[E]),(0,n.useEffect)(()=>{W.current=y},[y]);let K=(0,n.useCallback)(async e=>{let t=U.current[e],r=t?-1:1;k(t=>(t||[]).map(t=>t.id===e?{...t,likes:Math.max(0,t.likes+r)}:t),!1),R(r=>{let n={...r};return t?delete n[e]:n[e]=!0,n}),f(e,r)},[k]),$=(0,n.useCallback)(async(e,t)=>{let r=P.current,n=r[e],a=0,i=0,o={...r};if(n===t){"up"===t?a=-1:i=-1;let{[e]:r,...n}=o;o=n}else n?"up"===n?(a=-1,i=1):(i=-1,a=1):"up"===t?a=1:i=1,o[e]=t;h(t=>(t||[]).map(t=>t.id===e?{...t,likes:Math.max(0,(t.likes||0)+a),dislikes:Math.max(0,(t.dislikes||0)+i)}:t),!1),p(o),u(e,a,i)},[h]),z=(0,n.useCallback)(e=>{let t={...e,id:Date.now()};m(e=>[t,...e])},[]),H=(0,n.useCallback)(e=>{m(t=>t.filter(t=>t.id!==e))},[]),B=(0,n.useCallback)(e=>{let t={...e,id:Date.now()};S(e=>[t,...e])},[]),Y=(0,n.useCallback)(e=>{S(t=>t.filter(t=>t.id!==e))},[]),q=(0,n.useCallback)((e,t)=>{S(r=>r.map(r=>r.id===e?{...r,...t}:r))},[]),G=(0,n.useCallback)(e=>{_(t=>[...t,e])},[]),Q=(0,n.useCallback)(e=>{_(t=>t.filter((t,r)=>r!==e))},[]);(0,n.useCallback)((e,t)=>{let r=[...O];r[e]=t,_(r)},[O]);let X=(0,n.useCallback)((e,t)=>{_(r=>{let n=[...r];return n[e]=t,n})},[]),Z=(0,n.useCallback)(e=>{L(e)},[]),ee=(0,n.useCallback)(e=>{T(t=>t.map(t=>t.id===e?{...t,votes:t.votes+1}:t))},[]),et=(0,n.useMemo)(()=>({announcements:v,allNews:g,confessions:y,comments:E,commentLikes:w,shuttleStops:O,menuOptions:C,dailyMenu:A,isAdmin:t,loginAdmin:M,logoutAdmin:I,addConfession:V,updateConfessionStatus:D,addComment:N,updateCommentStatus:j,getComments:x,toggleCommentLike:K,getReplies:F,addAnnouncement:z,deleteAnnouncement:H,addNews:B,deleteNews:Y,updateNews:q,addShuttleStop:G,deleteShuttleStop:Q,updateShuttleStop:X,updateDailyMenu:Z,voteMenuOption:ee,voteConfession:$,myVotes:d}),[v,g,y,E,w,O,C,A,t,M,I,V,D,N,j,x,K,F,z,H,B,Y,q,G,Q,X,Z,ee,$,d]);return(0,r.jsx)(ef.Provider,{value:et,children:e})}function ep(){let e=(0,n.useContext)(ef);if(void 0===e)throw Error("useStore must be used within a StoreProvider");return e}e.s(["StoreProvider",()=>ed,"useStore",()=>ep],62008)}]);