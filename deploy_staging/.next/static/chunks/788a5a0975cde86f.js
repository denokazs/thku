(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},87960,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(78481),l=e.i(17923),i=e.i(61911),r=e.i(86536),c=e.i(25652);function d(){let[e,d]=(0,s.useState)(null),[n,o]=(0,s.useState)(!0),[x,m]=(0,s.useState)(30);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=(await e.json()).user;t&&"club_admin"===t.role&&t.clubId?await h("club",t.clubId):await h("global")}else await h("global")}catch(e){await h("global")}})()},[x]);let h=async(e="global",t)=>{o(!0);try{let s=`/api/analytics/stats?days=${x}&scope=${e}`;"club"===e&&t&&(s+=`&clubId=${t}`);let a=await fetch(s);if(a.ok){let e=await a.json();p(e)}}catch(e){console.error("Error fetching stats:",e)}finally{o(!1)}},p=e=>{let t={},s={};for(let e=0;e<x;e++){let s=new Date;s.setDate(s.getDate()-e),t[s.toISOString().split("T")[0]]=0}e.views.forEach(e=>{let a=e.timestamp.split("T")[0];void 0!==t[a]&&t[a]++;let l=e.path;s[l]=(s[l]||0)+1});let a=Object.entries(t).sort((e,t)=>e[0].localeCompare(t[0])).map(([e,t])=>({date:e,count:t})),l=Object.entries(s).sort((e,t)=>t[1]-e[1]).slice(0,10);d({totalViews:e.totalViews,uniqueVisitors:e.uniqueVisitors,chartData:a,topPages:l,recentViews:e.views.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())})};if(n&&!e)return(0,t.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Yükleniyor..."});let b=Math.max(...e?.chartData.map(e=>e.count)||[0],10);return(0,t.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Site İstatistikleri"}),(0,t.jsx)("p",{className:"text-slate-500",children:"Gerçek zamanlı trafik analizi"})]}),(0,t.jsx)("div",{className:"flex gap-2 bg-white p-1 rounded-lg border border-slate-200",children:[7,30,90].map(e=>(0,t.jsxs)("button",{onClick:()=>m(e),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${x===e?"bg-blue-600 text-white":"text-slate-600 hover:bg-slate-50"}`,children:["Son ",e," Gün"]},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-blue-100 p-3 rounded-full text-blue-600",children:(0,t.jsx)(r.Eye,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Toplam Görüntülenme"}),(0,t.jsx)("h3",{className:"text-3xl font-bold text-slate-800",children:e?.totalViews.toLocaleString()})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-green-100 p-3 rounded-full text-green-600",children:(0,t.jsx)(i.Users,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Tekil Ziyaretçi"}),(0,t.jsx)("h3",{className:"text-3xl font-bold text-slate-800",children:e?.uniqueVisitors.toLocaleString()})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-purple-100 p-3 rounded-full text-purple-600",children:(0,t.jsx)(c.TrendingUp,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Ortalama Görüntülenme"}),(0,t.jsxs)("h3",{className:"text-3xl font-bold text-slate-800",children:[Math.round(e?.totalViews/x).toLocaleString()," ",(0,t.jsx)("span",{className:"text-sm text-slate-400 font-normal",children:"/ gün"})]})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[(0,t.jsx)(l.BarChart3,{className:"w-5 h-5 text-slate-400"}),"Zaman Çizelgesi"]}),(0,t.jsx)("div",{className:"h-64 flex items-end gap-2",children:e?.chartData.map((e,s)=>(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-end group relative",children:[(0,t.jsx)(a.motion.div,{initial:{height:0},animate:{height:`${e.count/b*100}%`},className:"bg-blue-600 rounded-t-sm w-full opacity-80 group-hover:opacity-100 transition-opacity min-h-[4px]"}),(0,t.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-10",children:(0,t.jsxs)("div",{className:"bg-slate-800 text-white text-xs py-1 px-2 rounded whitespace-nowrap",children:[e.date,": ",(0,t.jsx)("strong",{children:e.count})]})})]},s))}),(0,t.jsxs)("div",{className:"mt-4 flex justify-between text-xs text-slate-400 border-t border-slate-100 pt-2",children:[(0,t.jsx)("span",{children:e?.chartData[0].date}),(0,t.jsx)("span",{children:e?.chartData[Math.floor(e?.chartData.length/2)].date}),(0,t.jsx)("span",{children:e?.chartData[e?.chartData.length-1].date})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[(0,t.jsx)(c.TrendingUp,{className:"w-5 h-5 text-slate-400"}),"Popüler Sayfalar"]}),(0,t.jsx)("div",{className:"space-y-4",children:e?.topPages.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-slate-50 transition-colors border border-transparent hover:border-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,t.jsx)("span",{className:`w-6 h-6 flex-shrink-0 flex items-center justify-center rounded text-xs font-bold ${0===s?"bg-yellow-100 text-yellow-700":1===s?"bg-slate-200 text-slate-700":2===s?"bg-orange-100 text-orange-700":"bg-slate-50 text-slate-500"}`,children:s+1}),(0,t.jsx)("span",{className:"text-sm text-slate-600 truncate font-medium",title:e[0],children:e[0]})]}),(0,t.jsx)("span",{className:"font-bold text-slate-800 text-sm bg-slate-100 px-2 py-1 rounded",children:e[1]})]},s))})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[(0,t.jsx)(i.Users,{className:"w-5 h-5 text-slate-400"}),"Son Canlı Ziyaretçiler"]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-slate-100 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[(0,t.jsx)("th",{className:"pb-3 pl-2",children:"Zaman"}),(0,t.jsx)("th",{className:"pb-3",children:"IP Adresi"}),(0,t.jsx)("th",{className:"pb-3",children:"Konum"}),(0,t.jsx)("th",{className:"pb-3",children:"Cihaz"}),(0,t.jsx)("th",{className:"pb-3",children:"Sayfa"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-50",children:e?.recentViews?.slice(0,50).map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,t.jsxs)("td",{className:"py-3 pl-2 text-xs text-slate-500 whitespace-nowrap",children:[new Date(e.timestamp).toLocaleTimeString(),(0,t.jsx)("div",{className:"text-[10px] text-slate-400",children:new Date(e.timestamp).toLocaleDateString()})]}),(0,t.jsx)("td",{className:"py-3 text-sm font-bold text-slate-700 font-mono",children:e.ip||"-"}),(0,t.jsx)("td",{className:"py-3 text-sm text-slate-600",children:e.geo?.city&&e.geo?.country?(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[e.geo.city,", ",e.geo.country]}):(0,t.jsx)("span",{className:"text-slate-400",children:"-"})}),(0,t.jsx)("td",{className:"py-3 text-sm text-slate-600",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold text-xs",children:e.device?.type||"Desktop"}),(0,t.jsxs)("span",{className:"text-[10px] text-slate-400",children:[e.device?.os," - ",e.device?.browser]})]})}),(0,t.jsx)("td",{className:"py-3 text-sm text-blue-600 font-medium truncate max-w-[200px]",title:e.path,children:e.path})]},e.id))})]})})]})]})}e.s(["default",()=>d])}]);