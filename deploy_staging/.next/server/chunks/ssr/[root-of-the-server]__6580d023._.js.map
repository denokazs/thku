{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","../../../../app/actions/confessions.ts","../../../../app/actions/comments.ts","../../../../.next-internal/server/app/_not-found/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","'use server';\r\n\r\nimport { readDb, writeDb } from '@/lib/db';\r\nimport { Confession } from '@/types';\r\n\r\n// Helper to get confessions from DB\r\nasync function getConfessionsDB() {\r\n    const db = await readDb();\r\n    return Array.isArray(db.confessions) ? db.confessions : [];\r\n}\r\n\r\nexport async function getConfessionsAction(): Promise<Confession[]> {\r\n    return await getConfessionsDB();\r\n}\r\n\r\nexport async function addConfessionAction(text: string, user: string, type: Confession['type']): Promise<Confession> {\r\n    const db: any = await readDb();\r\n    if (!db.confessions) db.confessions = [];\r\n\r\n    const newConfession: Confession = {\r\n        id: Date.now(),\r\n        text,\r\n        user,\r\n        type,\r\n        likes: 0,\r\n        dislikes: 0,\r\n        status: 'pending',\r\n        timestamp: Date.now(),\r\n    };\r\n\r\n    // Add to beginning\r\n    db.confessions.unshift(newConfession);\r\n    await writeDb(db);\r\n\r\n    return newConfession;\r\n}\r\n\r\nexport async function updateConfessionStatusAction(id: number, status: Confession['status']): Promise<void> {\r\n    const db: any = await readDb();\r\n    if (!db.confessions) return;\r\n\r\n    db.confessions = db.confessions.map((c: Confession) => c.id === id ? { ...c, status } : c);\r\n    await writeDb(db);\r\n}\r\n\r\nexport async function updateConfessionVotesAction(id: number, likeDelta: number, dislikeDelta: number): Promise<void> {\r\n    const db: any = await readDb();\r\n    if (!db.confessions) return;\r\n\r\n    db.confessions = db.confessions.map((c: Confession) => {\r\n        if (c.id === id) {\r\n            return {\r\n                ...c,\r\n                likes: Math.max(0, (c.likes || 0) + likeDelta),\r\n                dislikes: Math.max(0, (c.dislikes || 0) + dislikeDelta)\r\n            };\r\n        }\r\n        return c;\r\n    });\r\n\r\n    await writeDb(db);\r\n}\r\n","'use server';\r\n\r\nimport { readDb, writeDb } from '@/lib/db';\r\nimport { Comment } from '@/types';\r\n\r\n// Helper to get comments from DB\r\nasync function getCommentsDB() {\r\n    const db = await readDb();\r\n    return Array.isArray(db.comments) ? db.comments : [];\r\n}\r\n\r\nexport async function getCommentsAction(confessionId?: number): Promise<Comment[]> {\r\n    const comments = await getCommentsDB();\r\n    if (confessionId !== undefined) {\r\n        return comments.filter((c: Comment) => c.confessionId === confessionId);\r\n    }\r\n    return comments;\r\n}\r\n\r\nexport async function addCommentAction(\r\n    confessionId: number,\r\n    text: string,\r\n    user: string,\r\n    parentCommentId?: number\r\n): Promise<Comment> {\r\n    const db: any = await readDb();\r\n    if (!db.comments) db.comments = [];\r\n\r\n    const newComment: Comment = {\r\n        id: Date.now(),\r\n        confessionId,\r\n        parentCommentId,\r\n        text,\r\n        user,\r\n        likes: 0,\r\n        status: 'pending',\r\n        timestamp: Date.now(),\r\n    };\r\n\r\n    db.comments.unshift(newComment);\r\n    await writeDb(db);\r\n\r\n    return newComment;\r\n}\r\n\r\nexport async function updateCommentStatusAction(\r\n    id: number,\r\n    status: Comment['status']\r\n): Promise<void> {\r\n    const db: any = await readDb();\r\n    if (!db.comments) return;\r\n\r\n    db.comments = db.comments.map((c: Comment) => c.id === id ? { ...c, status } : c);\r\n    await writeDb(db);\r\n}\r\n\r\nexport async function toggleCommentLikeAction(\r\n    id: number,\r\n    increment: number\r\n): Promise<void> {\r\n    const db: any = await readDb();\r\n    if (!db.comments) return;\r\n\r\n    db.comments = db.comments.map((c: Comment) =>\r\n        c.id === id ? { ...c, likes: Math.max(0, c.likes + increment) } : c\r\n    );\r\n    await writeDb(db);\r\n}\r\n","export {addConfessionAction as '7086b487069271ef8061b19ec6b5bb075d68b7e272'} from 'ACTIONS_MODULE0'\nexport {updateConfessionStatusAction as '60f028cfb3d1bb0763fb3d0082c871cb20f4bf69d8'} from 'ACTIONS_MODULE0'\nexport {updateConfessionVotesAction as '7057f357649cb246204c9b4ffbae7053876ebfe94d'} from 'ACTIONS_MODULE0'\nexport {addCommentAction as '780ee099162eb2d058b9cbd436970058cf7224d12b'} from 'ACTIONS_MODULE1'\nexport {updateCommentStatusAction as '60fa2190b9a618fed2bbb9025dfe94767bde8a11f6'} from 'ACTIONS_MODULE1'\nexport {toggleCommentLikeAction as '602b806037e766993bc6842033a67637cada092f9a'} from 'ACTIONS_MODULE1'\nexport {getConfessionsAction as '0039a463ebb594c113ed52fb98b09994d88e7e16cd'} from 'ACTIONS_MODULE0'\nexport {getCommentsAction as '4034c1876a42b0826f9b870007b9b3e0df6c91c34f'} from 'ACTIONS_MODULE1'\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0,1]}