module.exports=[24669,a=>{"use strict";let b=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],24669)},77156,a=>{"use strict";let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},63874,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(39761),f=a.i(60246),g=a.i(77156),h=a.i(24669);function i(){let[a,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(30);(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/auth/me");if(a.ok){let b=(await a.json()).user;b&&"club_admin"===b.role&&b.clubId?await n("club",b.clubId):await n("global")}else await n("global")}catch(a){await n("global")}})()},[l]);let n=async(a="global",b)=>{k(!0);try{let c=`/api/analytics/stats?days=${l}&scope=${a}`;"club"===a&&b&&(c+=`&clubId=${b}`);let d=await fetch(c);if(d.ok){let a=await d.json();o(a)}}catch(a){console.error("Error fetching stats:",a)}finally{k(!1)}},o=a=>{let b={},c={};for(let a=0;a<l;a++){let c=new Date;c.setDate(c.getDate()-a),b[c.toISOString().split("T")[0]]=0}a.views.forEach(a=>{let d=a.timestamp.split("T")[0];void 0!==b[d]&&b[d]++;let e=a.path;c[e]=(c[e]||0)+1});let d=Object.entries(b).sort((a,b)=>a[0].localeCompare(b[0])).map(([a,b])=>({date:a,count:b})),e=Object.entries(c).sort((a,b)=>b[1]-a[1]).slice(0,10);i({totalViews:a.totalViews,uniqueVisitors:a.uniqueVisitors,chartData:d,topPages:e,recentViews:a.views.sort((a,b)=>new Date(b.timestamp).getTime()-new Date(a.timestamp).getTime())})};if(j&&!a)return(0,b.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Yükleniyor..."});let p=Math.max(...a?.chartData.map(a=>a.count)||[0],10);return(0,b.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Site İstatistikleri"}),(0,b.jsx)("p",{className:"text-slate-500",children:"Gerçek zamanlı trafik analizi"})]}),(0,b.jsx)("div",{className:"flex gap-2 bg-white p-1 rounded-lg border border-slate-200",children:[7,30,90].map(a=>(0,b.jsxs)("button",{onClick:()=>m(a),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${l===a?"bg-blue-600 text-white":"text-slate-600 hover:bg-slate-50"}`,children:["Son ",a," Gün"]},a))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"bg-blue-100 p-3 rounded-full text-blue-600",children:(0,b.jsx)(g.Eye,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Toplam Görüntülenme"}),(0,b.jsx)("h3",{className:"text-3xl font-bold text-slate-800",children:a?.totalViews.toLocaleString()})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"bg-green-100 p-3 rounded-full text-green-600",children:(0,b.jsx)(f.Users,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Tekil Ziyaretçi"}),(0,b.jsx)("h3",{className:"text-3xl font-bold text-slate-800",children:a?.uniqueVisitors.toLocaleString()})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"bg-purple-100 p-3 rounded-full text-purple-600",children:(0,b.jsx)(h.TrendingUp,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Ortalama Görüntülenme"}),(0,b.jsxs)("h3",{className:"text-3xl font-bold text-slate-800",children:[Math.round(a?.totalViews/l).toLocaleString()," ",(0,b.jsx)("span",{className:"text-sm text-slate-400 font-normal",children:"/ gün"})]})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[(0,b.jsx)(e.BarChart3,{className:"w-5 h-5 text-slate-400"}),"Zaman Çizelgesi"]}),(0,b.jsx)("div",{className:"h-64 flex items-end gap-2",children:a?.chartData.map((a,c)=>(0,b.jsxs)("div",{className:"flex-1 flex flex-col justify-end group relative",children:[(0,b.jsx)(d.motion.div,{initial:{height:0},animate:{height:`${a.count/p*100}%`},className:"bg-blue-600 rounded-t-sm w-full opacity-80 group-hover:opacity-100 transition-opacity min-h-[4px]"}),(0,b.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-10",children:(0,b.jsxs)("div",{className:"bg-slate-800 text-white text-xs py-1 px-2 rounded whitespace-nowrap",children:[a.date,": ",(0,b.jsx)("strong",{children:a.count})]})})]},c))}),(0,b.jsxs)("div",{className:"mt-4 flex justify-between text-xs text-slate-400 border-t border-slate-100 pt-2",children:[(0,b.jsx)("span",{children:a?.chartData[0].date}),(0,b.jsx)("span",{children:a?.chartData[Math.floor(a?.chartData.length/2)].date}),(0,b.jsx)("span",{children:a?.chartData[a?.chartData.length-1].date})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[(0,b.jsx)(h.TrendingUp,{className:"w-5 h-5 text-slate-400"}),"Popüler Sayfalar"]}),(0,b.jsx)("div",{className:"space-y-4",children:a?.topPages.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-slate-50 transition-colors border border-transparent hover:border-slate-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,b.jsx)("span",{className:`w-6 h-6 flex-shrink-0 flex items-center justify-center rounded text-xs font-bold ${0===c?"bg-yellow-100 text-yellow-700":1===c?"bg-slate-200 text-slate-700":2===c?"bg-orange-100 text-orange-700":"bg-slate-50 text-slate-500"}`,children:c+1}),(0,b.jsx)("span",{className:"text-sm text-slate-600 truncate font-medium",title:a[0],children:a[0]})]}),(0,b.jsx)("span",{className:"font-bold text-slate-800 text-sm bg-slate-100 px-2 py-1 rounded",children:a[1]})]},c))})]})]}),(0,b.jsxs)("div",{className:"mt-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[(0,b.jsx)(f.Users,{className:"w-5 h-5 text-slate-400"}),"Son Canlı Ziyaretçiler"]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-100 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[(0,b.jsx)("th",{className:"pb-3 pl-2",children:"Zaman"}),(0,b.jsx)("th",{className:"pb-3",children:"IP Adresi"}),(0,b.jsx)("th",{className:"pb-3",children:"Konum"}),(0,b.jsx)("th",{className:"pb-3",children:"Cihaz"}),(0,b.jsx)("th",{className:"pb-3",children:"Sayfa"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-50",children:a?.recentViews?.slice(0,50).map(a=>(0,b.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,b.jsxs)("td",{className:"py-3 pl-2 text-xs text-slate-500 whitespace-nowrap",children:[new Date(a.timestamp).toLocaleTimeString(),(0,b.jsx)("div",{className:"text-[10px] text-slate-400",children:new Date(a.timestamp).toLocaleDateString()})]}),(0,b.jsx)("td",{className:"py-3 text-sm font-bold text-slate-700 font-mono",children:a.ip||"-"}),(0,b.jsx)("td",{className:"py-3 text-sm text-slate-600",children:a.geo?.city&&a.geo?.country?(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[a.geo.city,", ",a.geo.country]}):(0,b.jsx)("span",{className:"text-slate-400",children:"-"})}),(0,b.jsx)("td",{className:"py-3 text-sm text-slate-600",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-bold text-xs",children:a.device?.type||"Desktop"}),(0,b.jsxs)("span",{className:"text-[10px] text-slate-400",children:[a.device?.os," - ",a.device?.browser]})]})}),(0,b.jsx)("td",{className:"py-3 text-sm text-blue-600 font-medium truncate max-w-[200px]",title:a.path,children:a.path})]},a.id))})]})})]})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=_c669cda6._.js.map